---
title: "Clustering and classification"
author: "Jaana Simola"
date: "11/21/2018"
output: html_document
---

# Week 4 - Clustering and classification

```{r}
rm(list = ls())  # clear workspace
library(MASS)
data("Boston")
str(Boston)
```

### Boston data set
This data has 506 osbervations (rows) and 14 variables (columns). The data includes information about housing values of  suburbs of Boston, such as crime rate, business, accessibility to highways, and characteristics of the citizens in the area. 

```{r, include=FALSE}
library(tidyr); library(dplyr); library(ggplot2); library(tidyverse); library(corrplot) # load libraries
```
### Plot the distibutions of the variables
```{r}
gather(Boston) %>% glimpse
gather(Boston) %>% ggplot(aes(value)) + facet_wrap("key", scales = "free") + geom_histogram() # bar plots
```

* 'age', 'black' and 'ptratio' are left skewed
* 'dis', 'Istat' and 'nox' are right skewed
*  most values of 'chas', 'crim' and 'zn' are zeros
* 'indus', 'rad' and 'tax' are bimodal
* 'medv' and 'rm' roughly normally distributed

### Summarize data
```{r}
summary(Boston)
```

### Correlations between the variables
```{r}
cor_matrix <-cor(Boston) 
cor_matrix <-round(cor_matrix, digits=2)
cor_matrix 
corrplot(cor_matrix, method = "color") 
```
  
Overall, the variables show strong correlations with each other, therefore only the strongest (> 0.7 or < -0.7) are interpreted below

* 'indus' correlates positively with 'nox' (0.76) and 'tax' (0.72) and negatively with 'dis' (-0.71), suggesting that the proportion of non-retail business acres is associated with higher nitrogen oxides concentration and tax rate and with  shorter distances from Boston employment centres.

* 'nox' correlates positively with 'age' (0.73) and negatively with 'dis' (-0.77), suggesting that the proportion of units  built prior to 1940 is associated with higher nitrogen oxides concentration and shorter distance from employment centres. 
* 'rm' correlates positively with 'medv' (0.7), suggesting that the average number of rooms is associated with higher median of owner-occupied homes in \$1000s.

* 'age' correlates negatively with 'dis' (-0.75), suggesting that the proportion of units  built prior to 1940 is associated with shorter distance from employment centres.

* 'rad' correlates with 'tax' (0.91): accessibility to highways is highly correlated with tax rate.

* 'lstat' correlates negatively with 'medv' (-0.74): the percentage of lower status population (is this appropriate??) is associated with lower amount of owner-occupied homes in \$1000s.

### Standardize the data
```{r}
boston_scaled <- scale(Boston)
summary(boston_scaled)
```
  
The data is now standardized to zero mean.

### Create a categorical variable of the crime rate 
```{r}
boston_scaled <- as.data.frame(boston_scaled)

# create a quantile vector of crim and print it
bins <- quantile(boston_scaled$crim) 

# create a categorical variable 'crime' and print the table
crime <- cut(boston_scaled$crim, breaks = bins, include.lowest = TRUE, label = c("low", "med_low", "med_high", "high"))
table(crime)

# remove original crim from the dataset
boston_scaled <- dplyr::select(boston_scaled, -crim)
```

###  Divide the dataset to train (80%) and test (20%) sets
```{r}
n <- nrow(boston_scaled) # number of rows

# choose randomly 80% of the rows to create the train set
ind <- sample(n,  size = n * 0.8)
train <- boston_scaled[ind,]

# create test set 
test <- boston_scaled[-ind,]
```

